<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit"
	xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<munit:config name="new-test-suite.xml" />
	<munit:test
		name="sys-redis-api-main-apikit-bad-request-test" ignore="true">

		<munit:execution>
			<munit:set-event doc:name="Set Event"
				doc:id="930a7d29-18ca-4144-aefb-04249dc29f7e">
				<munit:attributes
					value='#[{&#10;  "headers": {&#10;    "x-correlation-id": "s12312312312312312"&#10;  },&#10;  "listenerPath": "/api/*",&#10; "relativePath": "/api/brand/9172222",&#10;  "version": "HTTP/1.1",&#10;  "method": "GET",&#10;  "scheme": "HTTP",&#10;  "requestPath": "",&#10;  "requestUri": "",&#10;  "rawRequestPath": "/api/brand/9172222",&#10;  "localAddress": "",&#10;  "remoteAddress": ""&#10;}&#10;as Object {&#10;  class: "org.mule.extension.http.api.HttpRequestAttributes"&#10;}]' />

			</munit:set-event>
			<try doc:name="Try" doc:id="8fad8af9-68fd-43ed-b351-04c1ae1498a7">
				<flow-ref doc:name="Flow Ref to sys-redis-api-main"
					doc:id="a883d75c-5ca4-4d73-91dd-f1d17d9e8a0a"
					name="sys-redis-api-main" />
				<error-handler>
					<on-error-continue enableNotifications="true"
						logException="true" doc:name="On Error Continue"
						doc:id="6efb32e0-5821-430c-9dc5-af31918018f6">
						<logger level="INFO" doc:name="Logger"
							doc:id="6e66c2c6-075b-45aa-8188-c2f1e28912c1" />
					</on-error-continue>
				</error-handler>
			</try>
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-equals
				doc:name="Assert error http status"
				doc:id="27d63a46-818e-467e-bcb0-1022d53d53f5"
				actual="#[vars.httpStatus]" expected="400" />
			<munit-tools:verify-call
				doc:name="Verify api kit bad request"
				doc:id="f7b222eb-2443-4b6b-8ff3-8ed4ad257b1c"
				processor="set-variable" times="1">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute
						whereValue="400" attributeName="value" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>

</munit:test>
	<munit:test name="sys-redis-api-main-apikit-not-found-test"
		doc:id="0daae4aa-7b72-430f-95ec-3fcfc69a2efa" ignore="true">
		<munit:execution>
			<munit:set-event doc:name="Set Event"
				doc:id="45c5cfab-a78f-4add-ad93-e77791c874b9">
				<munit:attributes
					value='#[{&#10;  "headers": {&#10;    "x-correlation-id": "s12312312312312312"&#10;  },&#10;  "listenerPath": "/api/*",&#10; "relativePath": "/api/brand/",&#10;  "version": "HTTP/1.1",&#10;  "method": "GET",&#10;  "scheme": "HTTP",&#10;  "requestPath": "",&#10;  "requestUri": "",&#10;  "rawRequestPath": "/api/brand/",&#10;  "localAddress": "",&#10;  "remoteAddress": ""&#10;}&#10;as Object {&#10;  class: "org.mule.extension.http.api.HttpRequestAttributes"&#10;}]' />
			</munit:set-event>
			<try doc:name="Try" doc:id="c40653d5-bf9c-48bc-a80a-200e480fade5">
				<flow-ref doc:name="Flow Ref to sys-redis-api-main"
					doc:id="ebb8ff4e-dbf2-459c-bd94-802f640f4613"
					name="sys-redis-api-main" />
				<error-handler>
					<on-error-continue enableNotifications="true"
						logException="true" doc:name="On Error Continue"
						doc:id="90fcb9fb-f48f-4a19-8415-85a16ec0fba5">
						<logger level="INFO" doc:name="Logger"
							doc:id="8b2212ed-1c5a-4858-b8ec-041c362d4ed2" />
					</on-error-continue>
				</error-handler>
			</try>
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-equals
				doc:name="Assert error http status"
				doc:id="6f8c2418-6624-4aab-968c-3c1b7556ccb8"
				actual="#[vars.httpStatus]" expected="404" />
			<munit-tools:verify-call
				doc:name="Verify api kit bad request"
				doc:id="fc983fad-1d51-43db-8cc0-d40049e38338"
				processor="set-variable" times="1">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute
						whereValue="404" attributeName="value" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test
		name="sys-redis-api-main-apikit-method-not-allowed"
		doc:id="9e1681c4-8f09-4bde-a744-0765a3d0acb7" ignore="true">
		<munit:execution>
			<munit:set-event doc:name="Set Event"
				doc:id="80249f64-bdaa-4384-9010-dd30dffa533f">
				<munit:attributes
					value='#[{&#10;  "headers": {&#10;    "x-correlation-id": "s12312312312312312"&#10;  },&#10;  "listenerPath": "/api/91722*",&#10; "relativePath": "/api/brand/91722",&#10;  "version": "HTTP/1.1",&#10;  "method": "POST",&#10;  "scheme": "HTTP",&#10;  "requestPath": "",&#10;  "requestUri": "",&#10;  "rawRequestPath": "/api/brand/91722",&#10;  "localAddress": "",&#10;  "remoteAddress": ""&#10;}&#10;as Object {&#10;  class: "org.mule.extension.http.api.HttpRequestAttributes"&#10;}]' />
			</munit:set-event>
			<try doc:name="Try" doc:id="8414e56d-8b61-4005-932b-4510f7cfdddd">
				<flow-ref doc:name="Flow Ref to sys-redis-api-main"
					doc:id="10e8578c-4f29-4594-8c0b-5e7031997d0e"
					name="sys-redis-api-main" />
				<error-handler>
					<on-error-continue enableNotifications="true"
						logException="true" doc:name="On Error Continue"
						doc:id="9b2cfede-43d6-46a5-8139-64d98e1d5dd6">
						<logger level="INFO" doc:name="Logger"
							doc:id="70c8f584-5059-4ed1-ae4d-3a8430e1da61" />
					</on-error-continue>
				</error-handler>
			</try>
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-equals
				doc:name="Assert error http status"
				doc:id="1c5d2fc6-9346-4e79-a1da-011c83716365"
				actual="#[vars.httpStatus]" expected="405" />
			<munit-tools:verify-call
				doc:name="Verify api kit bad request"
				doc:id="ef64ab48-4fde-4572-939e-54bbe74f210b"
				processor="set-variable" times="1">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute
						whereValue="405" attributeName="value" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="sys-redis-api-main-apikit-not-acceptable"
		doc:id="3062aaa3-916b-4d6f-b938-6638a88ce07d" ignore="true">
		<munit:execution>
			<munit:set-event doc:name="Set Event"
				doc:id="5416f67b-9632-4b43-9cec-37317bfa59b5">
				<munit:attributes
					value='#[{&#10;  "headers": {&#10;    "x-correlation-id": "s12312312312312312",&#10;    "accept": "application/xml" &#10;  },&#10;  "listenerPath": "/api/91722*",&#10; "relativePath": "/api/brand/91722",&#10;  "version": "HTTP/1.1",&#10;  "method": "GET",&#10;  "scheme": "HTTP",&#10;  "requestPath": "",&#10;  "requestUri": "",&#10;  "rawRequestPath": "/api/brand/91722",&#10;  "localAddress": "",&#10;  "remoteAddress": ""&#10;}&#10;as Object {&#10;  class: "org.mule.extension.http.api.HttpRequestAttributes"&#10;}]' />
			</munit:set-event>
			<try doc:name="Try" doc:id="88063dfa-540f-437d-b01c-841142833a98">
				<flow-ref doc:name="Flow Ref to sys-redis-api-main"
					doc:id="d092af5d-0337-41d3-8270-b6e8011fcd1f"
					name="sys-redis-api-main" />
				<error-handler>
					<on-error-continue enableNotifications="true"
						logException="true" doc:name="On Error Continue"
						doc:id="3ee0c66b-fa60-4197-b03d-87895377bed0">
						<logger level="INFO" doc:name="Logger"
							doc:id="0ff89c31-d705-4a61-943e-e84f8fa15686" />
					</on-error-continue>
				</error-handler>
			</try>
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-equals
				doc:name="Assert error http status"
				doc:id="82b36f6a-5142-446f-b751-63ae9e2f91c5"
				actual="#[vars.httpStatus]" expected="406" />
			<munit-tools:verify-call doc:name="Verify api kit bad request" doc:id="f3e5c009-9961-4f09-8028-868d3de1381e" processor="set-variable" times="1" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="406" attributeName="value" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="sys-redis-api-main-apikit-unsupported-media-type-test" doc:id="da39fbfc-31f8-4fae-b6f4-4d63b43b9b9f" ignore="true">
		<munit:execution>
			<munit:set-event doc:name="Set Event" doc:id="573b6d0a-e128-4eed-8d89-0cb01d0082c7">
				<munit:payload value='#[{&#10;  "prefix": "91721",&#10;  "brand-id": "1",&#10;  "brand-name": "TM"&#10;}]' />
				<munit:attributes value='#[{&#10;  "headers": {&#10;    "x-correlation-id": "s12312312312312312",&#10;    "content-type": "application/xml" &#10;  },&#10;  "listenerPath": "/api/*",&#10; "relativePath": "/api/brand",&#10;  "version": "HTTP/1.1",&#10;  "method": "POST",&#10;  "scheme": "HTTP",&#10;  "requestPath": "",&#10;  "requestUri": "",&#10;  "rawRequestPath": "/api/brand",&#10;  "localAddress": "",&#10;  "remoteAddress": ""&#10;}&#10;as Object {&#10;  class: "org.mule.extension.http.api.HttpRequestAttributes"&#10;}]' />
			</munit:set-event>
			<try doc:name="Try" doc:id="2114525c-a98c-4be5-ae42-fb8adf08fa70">
				<flow-ref doc:name="Flow Ref to sys-redis-api-main" doc:id="cd0c37b3-5afc-44da-9c5e-60129bfaa014" name="sys-redis-api-main" />
				<error-handler>
					<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="95ab36e7-82d1-4653-a918-b4a047ecc4ae">
						<logger level="INFO" doc:name="Logger" doc:id="e10c7164-d410-4b08-87ef-6ecc07c84c93" />
					</on-error-continue>
				</error-handler>
			</try>
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-equals doc:name="Assert error http status" doc:id="507d00cd-9e77-4a98-904b-a4984e066b76" actual="#[vars.httpStatus]" expected="415" />
			<munit-tools:verify-call doc:name="Verify api kit bad request" doc:id="d107010f-26b6-4392-8465-9e7559a71b76" processor="set-variable" times="1">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute whereValue="415" attributeName="value" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="sys-redis-api-main-apikit-not-implemented-test" doc:id="0bf1d78b-4c51-4604-9ccf-8506bc4979ac">
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="d9f3e12c-f7d4-46bc-a2dc-8933288e8951" >
				<munit:payload value='#[{&#10;  "prefix": "91721",&#10;  "brand-id": "1",&#10;  "brand-name": "TM"&#10;}]' />
				<munit:attributes value='#[{&#10;  "headers": {&#10;    "x-correlation-id": "s12312312312312312",&#10;    "content-type": "application/json" &#10;  },&#10;  "listenerPath": "/api/*",&#10; "relativePath": "/not-defined-endpoint",&#10;  "version": "HTTP/1.1",&#10;  "method": "POST",&#10;  "scheme": "HTTP",&#10;  "requestPath": "",&#10;  "requestUri": "",&#10;  "rawRequestPath": "/not-defined-endpoint",&#10;  "localAddress": "",&#10;  "remoteAddress": ""&#10;}&#10;as Object {&#10;  class: "org.mule.extension.http.api.HttpRequestAttributes"&#10;}]' />
			</munit:set-event>
			<try doc:name="Try" doc:id="2337f320-83ac-44b9-bb6b-51487196fe58" >
				<flow-ref doc:name="Flow Ref to sys-redis-api-main" doc:id="e98ae05c-2f32-4459-b855-cb8e5972f7a1" name="sys-redis-api-main" />
				<error-handler >
					<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="ab41f38d-fd58-4f58-8bf3-893783becd11" >
						<logger level="INFO" doc:name="Logger" doc:id="f4afd805-a24a-4d71-a235-6d6f212d8c59" />
					</on-error-continue>
				</error-handler>
			</try>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert error http status" doc:id="f357d889-9aa5-4c5a-a38e-04b6b1e2eb7e" actual="#[vars.httpStatus]" expected="501" />
			<munit-tools:verify-call doc:name="Verify api kit bad request" doc:id="293e3c04-2e2a-42f9-8672-9b6b5f2996a2" processor="set-variable" times="1" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="501" attributeName="value" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	
</mule>
