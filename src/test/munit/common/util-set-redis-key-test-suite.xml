<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="util-set-redis-key-test-suite.xml" />
	<munit:test name="set-redis-key-state-subflow-success-test" doc:id="4bac4264-38fc-4633-aa8b-02506837fa5a" >
		<munit:behavior >
			<munit-tools:spy doc:name="Spy Set Variable" doc:id="b0371c5b-efb3-4070-89d3-4584059920cc" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="85597561-0727-46db-9d48-f4b1e7c50ada" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert variables" doc:id="0d4563e1-bf84-4447-b88f-3485d80de8d6" message="The variables do not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import setrediskeystatesubflowsuccesstest::spy_assert_variables1
---
spy_assert_variables1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="850e5d2a-d6cf-4b71-ac84-fe0619d546cb" >
				<munit:payload value="#[readUrl('classpath://setrediskeystatesubflowsuccesstest\set-event_payload1.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://setrediskeystatesubflowsuccesstest\set-event_attributes1.dwl')]" />
				<munit:variables >
					<munit:variable key="outboundHeaders" value="#[readUrl('classpath://setrediskeystatesubflowsuccesstest\set-event_variable_1.dwl')]" />
				</munit:variables>
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to set-redis-key-state-subflow" doc:id="639ba2cc-da5b-4644-a3ca-b5ec64837f3f" name="set-redis-key-state-subflow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert variables" doc:id="c64d0669-48ff-416c-907e-6196a079213a" message="The variables do not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import setrediskeystatesubflowsuccesstest::assert_expression_variables1
---
assert_expression_variables1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Set Variable" doc:id="3090790a-5a33-4c7b-850f-2b5cb5ec0c07" processor="set-variable" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="85597561-0727-46db-9d48-f4b1e7c50ada" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
<munit:test name="set-redis-key-brand-subflow-success-test" doc:id="2e6b0c57-b0fb-4fea-801c-0406bb190cc2" >
		<munit:behavior >
			<munit-tools:spy doc:name="Spy Set Variable" doc:id="5c20373d-56d2-44c3-bba5-e67b4b4c65b5" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="2c4f6b97-6fc1-4972-99fc-08b508749a9a" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert variables" doc:id="fc3dff2f-b0f3-4b46-acdb-93324949cadb" message="The variables do not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import setrediskeybrandsubflowsuccesstest::spy_assert_variables
---
spy_assert_variables::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="60d13304-ab66-4b23-afba-a73c54e66297" >
				<munit:payload value="#[readUrl('classpath://setrediskeybrandsubflowsuccesstest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://setrediskeybrandsubflowsuccesstest\set-event_attributes.dwl')]" />
				<munit:variables >
					<munit:variable key="outboundHeaders" value="#[readUrl('classpath://setrediskeybrandsubflowsuccesstest\set-event_variable_.dwl')]" />
				</munit:variables>
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to set-redis-key-brand-subflow" doc:id="5f5e17ce-1327-4693-8250-7aea6569b0db" name="set-redis-key-brand-subflow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert variables" doc:id="a0fe1462-a288-477d-9e74-32df5e7d3931" message="The variables do not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import setrediskeybrandsubflowsuccesstest::assert_expression_variables
---
assert_expression_variables::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Set Variable" doc:id="f4201b25-902f-4c21-9f42-05b1e0937e51" processor="set-variable" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="2c4f6b97-6fc1-4972-99fc-08b508749a9a" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="set-redis-key-brand-body-subflow-success-test" doc:id="4a35c86a-74d5-4d2c-bd8a-b0b7055765c1" >
		<munit:behavior >
			<munit-tools:spy doc:name="Spy Set Variable" doc:id="a7f083e0-12a9-46f1-9870-6d733c61cff0" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="191961c9-c85b-4060-8ee3-18581c58c321" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert variables" doc:id="6f0822de-e1fb-40ea-93c9-119f8c879e49" message="The variables do not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import setrediskeybrandbodysubflowsuccesstest::spy_assert_variables1
---
spy_assert_variables1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="0bcba7d4-85cf-4e55-82d4-5b1304b570ee" >
				<munit:payload value="#[output application/json --- readUrl('classpath://setrediskeybrandbodysubflowsuccesstest\set-event_payload1.dwl')]" encoding="UTF-8" mediaType="application/json" />
				<munit:attributes value="#[readUrl('classpath://setrediskeybrandbodysubflowsuccesstest\set-event_attributes1.dwl')]" />
				<munit:variables >
					<munit:variable key="outboundHeaders" value="#[readUrl('classpath://setrediskeybrandbodysubflowsuccesstest\set-event_variable_1.dwl')]" />
				</munit:variables>
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to set-redis-key-brand-body-subflow" doc:id="b0c3e9fb-a4ac-4c49-b0f1-a3f45a00b257" name="set-redis-key-brand-body-subflow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert variables" doc:id="567d04db-1f4c-4dc3-80f5-cffb27528d97" message="The variables do not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import setrediskeybrandbodysubflowsuccesstest::assert_expression_variables1
---
assert_expression_variables1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Set Variable" doc:id="17a384d7-b580-4fdf-b975-481dda660d5c" processor="set-variable" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="191961c9-c85b-4060-8ee3-18581c58c321" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>

</mule>
